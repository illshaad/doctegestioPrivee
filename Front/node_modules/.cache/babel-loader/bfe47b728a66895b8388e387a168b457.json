{"ast":null,"code":"var _jsxFileName = \"/Users/macbookpro/Downloads/doctegestio/Front/src/components/Drop.js\";\nimport React from 'react';\nimport { Radio } from 'antd';\nimport axios from 'axios';\nimport { NavLink } from 'react-router-dom';\n\nclass Upload extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onChangeHandler = e => {\n      this.setState({\n        selectedFile: e.target.files\n      });\n    };\n\n    this.onClickHandler = async () => {\n      if (this.state.selectedFile !== null) {\n        const data = new FormData();\n\n        for (var i = 0; i < this.state.selectedFile.length; i++) {\n          //permet de choisir plusieurs fichier //\n          data.append('file', this.state.selectedFile[i]); //envoie data back //\n        }\n\n        this.setState({\n          loading: true,\n          message: []\n        });\n        await axios.post(\"http://localhost:3000/upload\", data, {}).then(res => {\n          //data du back //\n          var testTableData = [];\n          testTableData.push(res.data[0].resulJson[1]);\n          this.setState({\n            loading: false,\n            dataFromBack: res.data[0].resulJson,\n            selectedCheckbox: testTableData\n          });\n        });\n      } else {\n        let returnRsult = [];\n        returnRsult.push(404);\n        returnRsult.push('Upload un document');\n        this.setState({\n          message: returnRsult\n        });\n      }\n    };\n\n    this.handleChange = e => {\n      if (e.target.value) {\n        const testTab = [];\n        testTab.push(this.state.dataFromBack[e.target.value]);\n        document.getElementById('formGroupExampleInput').value = testTab[0][\"diag\"];\n        this.setState({\n          selectedCheckbox: testTab,\n          value: e.target.value\n        });\n      }\n    };\n\n    this.sendFileBack = async () => {\n      document.getElementById('inputFile').value = null;\n      let selectedData = [];\n\n      if (document.getElementById('formGroupExampleInput').value === '') {\n        selectedData = [{\n          diag: this.state.selectedCheckbox[0]['diag'],\n          scores: this.state.selectedCheckbox[0][\"scores\"]\n        }];\n      } else {\n        selectedData = [{\n          diag: document.getElementById('formGroupExampleInput').value,\n          score: this.state.selectedCheckbox[0][\"scores\"]\n        }];\n      }\n\n      const data = new FormData();\n      data.append('radiogroup', this.state.selectedCheckbox); //recuperer la donnée de fromback et la checkbok l'indice de validation\n\n      await axios({\n        method: 'post',\n        url: 'http://localhost:3000/radio',\n        data: {\n          data: selectedData\n        }\n      }).then(res => {\n        console.log(res, 'ma response du front');\n        let returnResult = [];\n        returnResult.push(res.status);\n\n        if (res.status === 200) {\n          returnResult.push('Fichier envoyé');\n        } else {\n          returnResult.push('error type : ' + res.status);\n        }\n\n        this.setState({\n          selectedFile: null,\n          dataFromBack: [],\n          selectedCheckbox: [],\n          value: 1,\n          message: returnResult\n        });\n      });\n    };\n\n    this.drawLine = () => {\n      let result = [];\n\n      if (this.state.dataFromBack) {\n        this.state.dataFromBack.map((row, i) => {\n          if (i > 0) {\n            result.push(React.createElement(\"tr\", {\n              key: i,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 109\n              },\n              __self: this\n            }, React.createElement(\"th\", {\n              scope: \"row\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 110\n              },\n              __self: this\n            }, i), React.createElement(\"th\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 111\n              },\n              __self: this\n            }, row[\"diag\"]), React.createElement(\"th\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 112\n              },\n              __self: this\n            }, row[\"scores\"], \" % \"), React.createElement(\"th\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 113\n              },\n              __self: this\n            }, React.createElement(Radio.Group, {\n              name: \"radiogroup\",\n              value: this.state.value,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 114\n              },\n              __self: this\n            }, React.createElement(Radio, {\n              onChange: this.handleChange,\n              value: i,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 115\n              },\n              __self: this\n            })))));\n          }\n        });\n      }\n\n      return result;\n    };\n\n    this.state = {\n      selectedFile: null,\n      //mon fichier est stoker ici//\n      dataFromBack: [],\n      selectedCheckbox: [],\n      value: 1,\n      message: [],\n      loading: false\n    };\n  }\n\n  render() {\n    console.log(this.state.selectedCheckbox, ' CESTTT QUOIIIII');\n    var Test = '';\n\n    if (this.state.selectedCheckbox[0]) {\n      Test = this.state.selectedCheckbox[0][\"diag\"];\n    }\n\n    let buttonNext = '';\n    let champ = '';\n    let tab = '';\n    let message = '';\n\n    if (this.state.dataFromBack[0] !== undefined) {\n      buttonNext = React.createElement(\"button\", {\n        className: \"button-next\",\n        onClick: this.sendFileBack,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"NEXT\");\n      champ = React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        id: \"formGroupExampleInput\",\n        placeholder: Test,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      })));\n      tab = React.createElement(\"table\", {\n        className: \"table\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"#\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Diagnostic\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Score\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Validation\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, this.drawLine()), \" \");\n    }\n\n    if (this.state.message[0] !== undefined) {\n      if (this.state.message[0] === 200) {\n        message = React.createElement(\"div\", {\n          className: \"alert alert-success\",\n          role: \"alert\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, this.state.message[1]);\n      } else {\n        message = React.createElement(\"div\", {\n          className: \"alert alert-danger\",\n          role: \"alert\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, this.state.message[1]);\n      }\n    }\n\n    const loading = this.state.loading;\n\n    if (loading) {\n      var texteLoading = React.createElement(\"img\", {\n        src: \"./loading.svg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"d-flex align-items-center bd-highlight\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \"1\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Chargez le dossier\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), \"formats accept\\xE9s: doc, docx, pdf, png\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      method: \"post\",\n      action: \"#\",\n      id: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group files\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"inputFile\",\n      type: \"file\",\n      accept: \" .txt , .pdf, .png, .svg, .tiff,.bitmap , .bmp, .jpg, .jpeg , .doc, .docx ,.xml ,application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document , \",\n      name: \"file\",\n      multiple: true,\n      onChange: this.onChangeHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn\",\n      onClick: this.onClickHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"Upload\"))))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }), texteLoading, React.createElement(\"div\", {\n      className: \"d-flex align-items-center bd-highlight\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"2\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"Consultez le r\\xE9sultat\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }), \"le tableau des codifications CIM-10\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, tab)), React.createElement(\"div\", {\n      className: \"d-flex align-items-center bd-highlight\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"3\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"Validez ou corrigez\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }), \"Valider le code ou corriger\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, champ)), message), React.createElement(\"div\", {\n      className: \"display-button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(NavLink, {\n      to: \"/home\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      className: \"Exit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"Exit\")), buttonNext)));\n  }\n\n}\n\nexport default Upload;","map":{"version":3,"sources":["/Users/macbookpro/Downloads/doctegestio/Front/src/components/Drop.js"],"names":["React","Radio","axios","NavLink","Upload","Component","constructor","props","onChangeHandler","e","setState","selectedFile","target","files","onClickHandler","state","data","FormData","i","length","append","loading","message","post","then","res","testTableData","push","resulJson","dataFromBack","selectedCheckbox","returnRsult","handleChange","value","testTab","document","getElementById","sendFileBack","selectedData","diag","scores","score","method","url","console","log","returnResult","status","drawLine","result","map","row","render","Test","buttonNext","champ","tab","undefined","texteLoading"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Radio } from 'antd';\nimport axios from 'axios';\nimport { NavLink } from 'react-router-dom';\n\n\n\n\nclass Upload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n        selectedFile : null ,   //mon fichier est stoker ici//\n        dataFromBack  : [],\n        selectedCheckbox : [],\n        value : 1 ,\n        message : [],\n        loading : false ,\n    };\n}\n    onChangeHandler = e => {\n    this.setState({\n    selectedFile : e.target.files,\n        })\n    }\n\n    onClickHandler = async () => {\n        if(this.state.selectedFile !== null){\n            const data = new FormData() \n            for(var i = 0 ; i < this.state.selectedFile.length ; i++)\n            { //permet de choisir plusieurs fichier //\n                data.append('file', this.state.selectedFile[i]) //envoie data back //\n            }\n            this.setState({loading : true , message : [] })\n            await axios.post(\"http://localhost:3000/upload\", data, { \n            })\n            .then(res => { //data du back //\n                var testTableData = []\n                testTableData.push(res.data[0].resulJson[1])\n                this.setState({\n                loading : false ,\n                dataFromBack : res.data[0].resulJson ,\n                selectedCheckbox : testTableData\n                })      \n            })\n        }else{\n            let returnRsult = []\n            returnRsult.push(404)\n            returnRsult.push('Upload un document')\n            this.setState({\n                message : returnRsult\n            })\n        }\n    }\n\n    handleChange = (e) => {\n\n        if(e.target.value){\n            const testTab = [];\n            testTab.push(this.state.dataFromBack[e.target.value])\n            document.getElementById('formGroupExampleInput').value = testTab[0][\"diag\"]\n          this.setState({\n            selectedCheckbox : testTab , \n            value : e.target.value\n          }) \n        }\n    }\n\n    sendFileBack  = async () => {\n        document.getElementById('inputFile').value = null\n        let selectedData = [] ;\n\n        if(document.getElementById('formGroupExampleInput').value === ''){\n            selectedData = [{diag : this.state.selectedCheckbox[0]['diag'], scores :this.state.selectedCheckbox[0][\"scores\"]}]\n        }else{selectedData = [{diag : document.getElementById('formGroupExampleInput').value , score:this.state.selectedCheckbox[0][\"scores\"]}]\n        }\n       \n        const data = new FormData()\n        data.append('radiogroup', this.state.selectedCheckbox) //recuperer la donnée de fromback et la checkbok l'indice de validation\n        await axios({\n            method: 'post',\n            url: 'http://localhost:3000/radio',\n            data: {\n              data : selectedData\n            }\n          }).then(res => {\n              console.log(res , 'ma response du front')\n              let returnResult = [];\n                returnResult.push(res.status)\n                if(res.status === 200){\n                    returnResult.push('Fichier envoyé')\n                }else {\n                    returnResult.push('error type : ' + res.status)\n                }\n            this.setState({\n                selectedFile : null ,  \n                dataFromBack  : [],\n                selectedCheckbox : [],\n                value : 1 , \n                message :  returnResult\n            })\n          });\n    }\n    drawLine = () => {\n        let result = [];\n        if(this.state.dataFromBack){\n            this.state.dataFromBack.map((row,i) => {\n                if(i > 0){\n                result.push( <tr key = {i}>\n                    <th scope=\"row\">{i}</th>\n                    <th>{row[\"diag\"]}</th>\n                    <th>{row[\"scores\"]} % </th>\n                    <th>\n                    <Radio.Group name=\"radiogroup\" value={this.state.value}>\n                        <Radio onChange={this.handleChange} value={i}></Radio>\n                    </Radio.Group></th>\n                    </tr>)\n                    \n                }\n            })\n        }\n        return result\n    }\n\n    render() {\n        console.log(this.state.selectedCheckbox , ' CESTTT QUOIIIII');\n        \n        var Test = '' ; \n        if(this.state.selectedCheckbox[0]){\n          Test = this.state.selectedCheckbox[0][\"diag\"];\n        }\n        let buttonNext = ''\n        let champ = ''\n        let tab = ''\n        let message = ''\n\n        if(this.state.dataFromBack[0] !== undefined){\n        buttonNext =  <button className = 'button-next' onClick={this.sendFileBack}>NEXT</button>\n        champ = <form><div className=\"form-group\"><input type=\"text\" className=\"form-control\" id=\"formGroupExampleInput\" placeholder={Test}/></div></form>\n        tab =  <table className=\"table\"><thead><tr><th scope=\"col\">#</th><th scope=\"col\">Diagnostic</th><th scope=\"col\">Score</th><th scope=\"col\">Validation</th></tr></thead><tbody>{this.drawLine()}</tbody> </table>\n        }\n\n        if(this.state.message[0] !== undefined){\n            if(this.state.message[0] === 200){\n            message = <div className=\"alert alert-success\" role=\"alert\">{this.state.message[1]}</div>\n            }else{\n            message = <div className=\"alert alert-danger\" role=\"alert\">{this.state.message[1]}</div>\n            }\n        }\n        const loading = this.state.loading; \n        if(loading){\n            var texteLoading = <img src='./loading.svg'/>\n        }\n        \n    return (\n        <div className=\"container\">\n            <div className=\"\">\n            <div className=\"\">\n            <div className=\"d-flex align-items-center bd-highlight\">\n            <div><div className='text'>1</div></div>\n                <div><h1>Chargez le dossier</h1><br/>formats acceptés: doc, docx, pdf, png</div>\n                <div>\n                    <form method=\"post\" action=\"#\" id=\"#\">\n                        <div className=\"form-group files\">\n                            <input id='inputFile' type=\"file\" accept=\" .txt , .pdf, .png, .svg, .tiff,.bitmap , .bmp, .jpg, .jpeg , .doc, .docx ,.xml ,application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document , \" name=\"file\" multiple onChange={this.onChangeHandler}/>\n                            <button type=\"button\" className=\"btn\" onClick={this.onClickHandler}>Upload</button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n                <br/>\n                {texteLoading}\n                <div className=\"d-flex align-items-center bd-highlight\">\n                <div><div className='text'>2</div></div>\n                <div><h1>Consultez le résultat</h1><br/>le tableau des codifications CIM-10</div>\n                <div>{tab}</div>\n                </div>\n                \n                <div className=\"d-flex align-items-center bd-highlight\">\n                <div><div className='text'>3</div></div>\n                <div><h1>Validez ou corrigez</h1><br/>Valider le code ou corriger</div>\n                <div>{champ}</div>\n                </div>\n                {message}\n            </div>\n            <div className='display-button'>\n                <NavLink to=\"/home\"><button type=\"button\" className=\"Exit\" >Exit</button></NavLink>\n                {buttonNext}\n            </div>\n            </div> \n        </div>\n    );\n  }\n}\n\n\nexport default Upload;\n\n\n"]},"metadata":{},"sourceType":"module"}